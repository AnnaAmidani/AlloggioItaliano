eventiSpettacoli.jsp<%@ page language = "java" contentType="text/html; charset=utf-8" %><%@ include file="snippets/locale_resolver.jsp" %><%@ page import="  anna.alit.beanbb.HashBeanVector,  anna.alit.servicexhtml.TendineXHTML,  anna.alit.servicexhtml.AlloggioRisXHTML"%><% String context = request.getContextPath(); %><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" dir="ltr"><head>  <link rel="stylesheet" href="${pageContext.request.contextPath}/View/javascript/calendario/skins/aqua/theme.css" type="text/css" media="all" title="Aqua" />  <script type="text/javascript" src="${pageContext.request.contextPath}/View/javascript/calendario/calendar.js"></script>  <script type="text/javascript" src="${pageContext.request.contextPath}/View/javascript/calendario/calendar-it.js"></script>  <script type="text/javascript" src="${pageContext.request.contextPath}/View/javascript/calendario/cal.js"></script>  <script language="javascript">    function ChargeScheda(url)    {      var context = "${pageContext.request.contextPath}/View/eventiSpettacoliDescr";      var turl = context + url;      var w = open(turl,"ChargeDescr");    }  </script>  <script type="text/javascript">    function clearpar()    {      document.getElementById('regione').value='regione';      document.getElementById('sigla').value='0';      document.getElementById('comune').value='comune';      document.getElementById('nome').value='';      document.getElementById('settore').value='';      document.getElementById('categoria').value='';      document.getElementById('dal').value='';      document.getElementById('al').value='';    }  </script>  <jsp:include page="snippets/head.jsp" >      <jsp:param name="title" value="ttl.eventiSpettacoli" />  </jsp:include></head><body><div id="wrapper"><div id="wrapper_inner">  <jsp:include page="snippets/new_header.jsp"/>  <div id="main">	<div class="left" id="content">		<div id="content_inner">		  <div class="post">			<div class="post_title">			 <h2>			   <a href="#">               <fmt:message key="ttl.eventiSpettacoli"/>			   </a>			 </h2>			</div>             <br/>	           <p><b><fmt:message key="msg.PARAMETRI_DI_RICERCA"/></b>:</p>	            <form class="coltab" action="${pageContext.request.contextPath}/RicercaSegnalazioni" method="get">	              <input type="hidden" name="tipo" id="tipo" value="eventi e spettacoli"/>	              <%	              HashBeanVector esitoSegnalazioni = (HashBeanVector) session.getAttribute("esitoSegnalazioni");	              int numeroRisultati = 0;	                if(esitoSegnalazioni != null) {	                  numeroRisultati = esitoSegnalazioni.length("tipo");	                  if(numeroRisultati > 0) {	                    if( ! esitoSegnalazioni.get("tipo", 0).equals("eventi e spettacoli") )	                      numeroRisultati = 0;	                  }	                }	                String p = (String) request.getParameter("pagina");	                  int pagina = 1;	                  if(p != null){	                    pagina = Integer.parseInt(p);	                    session.setAttribute("pagina", pagina);	                  }	                  int index = ( pagina -1 ) * 12;	                  int dim = numeroRisultati;	                  int maxpagine = dim / 12;	                  if((dim % 12) != 0)	                    ++maxpagine;	              %>	              <input type="hidden" name="actiontype" value="popola3" />	              <input type="hidden" name="destinationPage" value="View/eventi.jsp" />	              <div class="parent_pane">				    <div class="left_pane"><b><fmt:message key="prm.per_luogo"/></b></div>				    <div class="right_pane">	                    <select class="smusso" id="regione" name="regione" title="regione"	                             onchange="this.form.action='<%= context + response.encodeURL("/Action") %>';this.form.submit();">	                     <%	                      String regione = (String) request.getAttribute("regione");	                      if(regione == null)	                      {	                        %> <%= TendineXHTML.optionlistregioni(locale) %> <%	                      }	                      else	                      {	                        %>	                        <option value="<%= regione %>" selected="selected"><%= regione %></option>	                        <%= TendineXHTML.optionlistregioni(locale) %>	                        <%	                      }	                      %>	                    </select>	                    <select class="smusso" id="sigla" name="sigla" title="provincia"	                      onchange="this.form.action='<%= context + response.encodeURL("/Action") %>';this.form.submit();">	                      <%	                      HashBeanVector hashResult = (HashBeanVector) request.getAttribute("hashResult");	                      String sigla = (String) request.getAttribute("sigla");	                      int size = 0;	                      if(sigla == null || sigla.equals("0"))	                      {	                        %> <option value="0" selected="selected"><fmt:message key="opt.provincia"/></option> <%	                      }	                      else	                      {	                        %>	                        <option value="<%= sigla %>" selected="selected"><%= sigla %></option>	                        <option value="0">provincia</option>	                        <%	                      }	                      if(hashResult != null){	                         String[] sigle = hashResult.getAsArray("sigla");	                         String[] nomeesteso = hashResult.getAsArray("nomeesteso");	                        size = (sigle != null && nomeesteso != null)? sigle.length : 0;	                         for(int i = 0; i < size; i++)	                         {	                          %> <option value="<%= sigle[i] %>"><%= nomeesteso[i] %></option> <%	                        }	                      }	                      %>	                    </select>	                    <select class="smusso" id="comune" name="comune" title="comune">	                      <option value="comune" disabled="disabled" selected="selected"><fmt:message key="opt.comune"/></option>	                      <%	                      if(hashResult != null){	                         String[] comune = hashResult.getAsArray("comune");	                        size = (comune != null)? comune.length : 0;	                         for(int i = 0; i < size; i++)	                         {	                          %> <option value="<%= comune[i] %>"><%= comune[i] %></option> <%	                        }	                      }	                      %>	                    </select>				    </div>				  </div>				  <div class="parent_pane">				    <div class="left_pane"><b><fmt:message key="prm.nome_evento"/></b></div>				    <div class="right_pane"><input type="text" size="20" class="smusso" id="nome" name="nome"/></div>				  </div>				  <div class="parent_pane">				    <div class="left_pane"><b><fmt:message key="prm.categoria"/></b></div>				    <div class="right_pane">				    	<select id="tipoEvento" class="smusso">				    	  <option value="qualsiasi" selected="qualsiasi">qualsiasi</option>				    	  <option value="percorsi">percorsi</option>				    	  <option value="eventi">eventi</option>				    	  <option value="spettacoli">spettacoli</option>				    	  <option value="feste">feste</option>				    	  <option value="fiere">fiere</option>				    	  <option value="mostre">mostre</option>				    	  <option value="musei">musei</option>				    	  <option value="corsi">corsi</option>				    	</select>				    </div>				  </div>				  <div class="parent_pane">				    <div class="left_pane"><b><fmt:message key="prm.per_periodo"/></b></div>				    <div class="right_pane">				      <fmt:message key="prm.dal"/>&nbsp;&nbsp;<input type="text" class="smusso" name="dal" id="dal" size="8"/><input type="reset" class="cal" value=" ... " onclick="return showCalendar('dal', '%Y-%m-%d');"/>                      &nbsp;<fmt:message key="prm.al"/>&nbsp;&nbsp;<input type="text" class="smusso" name="al" id="al" size="8"/><input type="reset" class="cal" value=" ... " onclick="return showCalendar('al', '%Y-%m-%d');"/>				    </div>				  </div>				  <br/>	               <p><%--<b><fmt:message key="msg.EFFETTUA_LA_RICERCA"/></b>&nbsp; --%>	                <button type="submit"><span class="round"><span><fmt:message key="btn.invio"/></span></span></button>	               <%--</p>	                <p><b><fmt:message key="msg.RESETTA_I_PARAMETRI"/></b>&nbsp; --%>	                <button type="button" onclick="clearpar();">	                  <span class="round"><span><fmt:message key="btn.reset"/></span></span>	                </button>	                </p>	                <p><b><fmt:message key="msg.RISULTATI"/></b>:	                <%	                if(numeroRisultati == -1)	                {	                  %> 0 <%	                }else	                {	                  %> <%= numeroRisultati %>  <%	                }	                %>	                </p>	            </form>	            <form name="findSegnalazione" action="<%= context + response.encodeURL("/View/eventiSpettacoliDescr.jsp")%>" method="post">	              <input type="hidden" name="id" id="id" value="" />	              <%	              if(numeroRisultati != 0)	              {	                %> <%= AlloggioRisXHTML.getTableRow3(esitoSegnalazioni, index) %> <%	              }	              %>	            </form>	            <form name="findSegnalazione" action="<%= context + response.encodeURL("/View/eventiSpettacoliDescr.jsp")%>" method="post">	              <%	              if(numeroRisultati != 0)	              {	                %> <%= AlloggioRisXHTML.getTableRow3(esitoSegnalazioni, index + 6) %> <%	              }	              %>	            </form>	      <form class="index" name="risultati"	        action="${pageContext.request.contextPath}/View/eventiSpettacoli.jsp">	        <p class="index_sx">	          <a class="negative" href="${pageContext.request.contextPath}/View/home.jsp">	            <fmt:message key="lnk.cerca_strutture"/>	          </a>	        </p>	        <p class="index_dx">	          <jsp:include page="snippets/indice.jsp" >	              <jsp:param name="url" value="/View/eventiSpettacoli.jsp?pagina=" />	              <jsp:param name="pagina" value="<%= pagina %>" />	              <jsp:param name="maxpagine" value="<%= maxpagine %>" />	          </jsp:include>	        </p>	      </form>		  </div>		</div>	 </div>     <jsp:include page="snippets/new_right.jsp">       <jsp:param name="title" value="ttl.eventiSpettacoli" />       <jsp:param name="header_text" value="hdr.eventi_spettacoli_1" />     </jsp:include>     <jsp:include page="snippets/new_footer.jsp" />  </div></div></div></body></html>